{% include 'config' %}
in:
  type: jdbc
  driver_path: {{driver_path}}
  driver_class: {{driver_class}}
  url: {{url}}
  user: {{userid}}
  password: {{password}}
  table: M_APCRD_MEM_TMP_MCH
  select: APCRD_NO
          ,MEM_ID
          ,MCH_FLG
          ,REG_DTTM
          ,REG_USR_ID
          ,UPD_DTTM
          ,UPD_USR_ID
          ,DAT_UPD_CLS
          ,UPD_TMS
          ,LGC_DEL_FLG
  where: {{where}}
filters:
  - type: column
    columns:
      - {name: APCRD_NO, type: string}
      - {name: MEM_ID, type: string}
      - {name: MCH_FLG, type: string}
      - {name: REG_DTTM, type: timestamp}
      - {name: REG_USR_ID, type: string}
      - {name: UPD_DTTM, type: timestamp}
      - {name: UPD_USR_ID, type: string}
      - {name: DAT_UPD_CLS, type: string}
      - {name: UPD_TMS, type: long}
      - {name: LGC_DEL_FLG, type: string}
    default_timestamp_format: "%Y-%m-%d %H:%M:%S"
    default_timezone: "Asia/Tokyo"
  - type: eval
    eval_columns:
      - UPD_TMS: 5
out:
  type: file
  path_prefix: /opt/scripts/data/{{output_file_name}}_{{current_timestamp}}
  sequence_format: "."
  file_ext: csv
  formatter:
    type: csv
    delimiter: "|"
    newline: LF
    charset: UTF-8
    quote_policy: NONE
    header_line: false
    default_timezone: "Asia/Tokyo"
    column_options:
      REG_DTTM: {format: '%Y-%m-%d %H:%M:%S'}
      UPD_DTTM: {format: '%Y-%m-%d %H:%M:%S'}
